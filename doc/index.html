<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title>pinocchio -- extensions for the 'nose' unit testing framework</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="pinocchio-extensions-for-the-nose-unit-testing-framework">
<h1 class="title">pinocchio -- extensions for the 'nose' unit testing framework</h1>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#introduction" id="id10" name="id10">Introduction</a></li>
<li><a class="reference" href="#extensions" id="id11" name="id11">Extensions</a><ul>
<li><a class="reference" href="#stopwatch-selecting-tests-based-on-execution-time" id="id12" name="id12">stopwatch -- selecting tests based on execution time</a><ul>
<li><a class="reference" href="#use-cases" id="id13" name="id13">Use cases</a></li>
<li><a class="reference" href="#options" id="id14" name="id14">Options</a></li>
<li><a class="reference" href="#examples" id="id15" name="id15">Examples</a></li>
</ul>
</li>
<li><a class="reference" href="#decorator-adding-attributes-to-tests" id="id16" name="id16">decorator -- adding attributes to tests</a><ul>
<li><a class="reference" href="#id1" id="id17" name="id17">Use cases</a></li>
<li><a class="reference" href="#id2" id="id18" name="id18">Options</a></li>
<li><a class="reference" href="#id3" id="id19" name="id19">Examples</a></li>
</ul>
</li>
<li><a class="reference" href="#figleafsections-find-out-what-tests-are-executing-which-parts-of-your-code" id="id20" name="id20">figleafsections -- find out what tests are executing which parts of your code</a></li>
<li><a class="reference" href="#outputsave-save-your-stdout-into-files" id="id21" name="id21">outputsave -- save your stdout into files</a><ul>
<li><a class="reference" href="#id4" id="id22" name="id22">Use cases</a></li>
<li><a class="reference" href="#id5" id="id23" name="id23">Options</a></li>
<li><a class="reference" href="#id6" id="id24" name="id24">Examples</a></li>
</ul>
</li>
<li><a class="reference" href="#spec-generate-test-description-from-test-class-method-names" id="id25" name="id25">spec -- generate test description from test class/method names</a><ul>
<li><a class="reference" href="#id7" id="id26" name="id26">Use cases</a></li>
<li><a class="reference" href="#id8" id="id27" name="id27">Options</a></li>
<li><a class="reference" href="#id9" id="id28" name="id28">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#license" id="id29" name="id29">License</a></li>
<li><a class="reference" href="#author-information" id="id30" name="id30">Author Information</a></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id10" id="introduction" name="introduction">Introduction</a></h1>
<p>pinocchio is a set of extensions to the <a class="reference" href="http://somethingaboutorange.com/mrl/projects/nose/">nose</a> unit testing framework
for Python.</p>
<p>The current version of pinocchio is 0.1, available at</p>
<blockquote>
<a class="reference" href="http://darcs.idyll.org/~t/projects/pinocchio-0.1.tar.gz">http://darcs.idyll.org/~t/projects/pinocchio-0.1.tar.gz</a></blockquote>
<p>You can always get the latest pinocchio distribution at</p>
<pre class="literal-block">
http://darcs.idyll.org/~t/projects/pinocchio-latest.tar.gz
</pre>
<p>You must install pinocchio with easy_install, e.g.</p>
<pre class="literal-block">
easy_install http://darcs.idyll.org/~t/projects/pinocchio-latest.tar.gz
</pre>
<p>pinocchio only works with nose 0.9a1 and above.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id11" id="extensions" name="extensions">Extensions</a></h1>
<div class="section">
<h2><a class="toc-backref" href="#id12" id="stopwatch-selecting-tests-based-on-execution-time" name="stopwatch-selecting-tests-based-on-execution-time">stopwatch -- selecting tests based on execution time</a></h2>
<p>Sometimes your unit tests just seem to take <em>forever</em>.  Well, now
you can get rid of the slow ones automatically!</p>
<p>The pinocchio.stopwatch extension module lets you time the unit tests
being run, and -- once times have been recorded -- then lets you
select only those that run faster than a given amount of time.  As a
bonus, the test names and run times are stored in a simple format -- a
pickled dictionary -- so you can target specific tests for speedup,
too.</p>
<div class="section">
<h3><a class="toc-backref" href="#id13" id="use-cases" name="use-cases">Use cases</a></h3>
<p>There's really only one use case here: your tests take too long to
run, so you and your developers aren't running them very frequently.
The stopwatch module lets you pick out the fast ones to be run via
the command line; you can always run the slow ones in your continuous
build system, right?</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id14" id="options" name="options">Options</a></h3>
<p><tt class="docutils literal"><span class="pre">--with-stopwatch</span></tt> enables test timing.</p>
<p><tt class="docutils literal"><span class="pre">--stopwatch-file</span></tt> changes the filename used to save the pickled test
times from '.nose-stopwatch-times' to the specified file.</p>
<p><tt class="docutils literal"><span class="pre">--faster-than</span></tt> sets an upper time limit (in seconds) for which tests
should be run.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id15" id="examples" name="examples">Examples</a></h3>
<p>See <tt class="docutils literal"><span class="pre">examples/test_stopwatch.py</span></tt> for some examples; use</p>
<pre class="literal-block">
nosetests -w examples/ --with-stopwatch --faster-than 1 test_stopwatch.py
nosetests -w examples/ --with-stopwatch --faster-than 1 test_stopwatch.py
</pre>
<p>to run a subset of the tests.  Note that you need to run it twice --
once to record the times (i.e. all tests will be run, independent of
the --faster-than parameter) and again to select only the &quot;fast&quot;
tests.</p>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id16" id="decorator-adding-attributes-to-tests" name="decorator-adding-attributes-to-tests">decorator -- adding attributes to tests</a></h2>
<p>The attrib extension module for nose is a great way to select subsets
of tests based on attributes you've given the test functions, classes,
or methods.  But what if you don't want to modify the source code
to add the attributes?</p>
<p>The pinocchio.decorator extension module lets you provide the names of
functions, classes, and methods to which to add tags.  For example,</p>
<pre class="literal-block">
TestModule.test_function: a
TestModule.TestClass: b
TestModule.TestClass.test_method: c
</pre>
<p>would set attributes on a function, a class, and a method.  Then</p>
<pre class="literal-block">
nosetests -a a
</pre>
<p>would run only the function,</p>
<pre class="literal-block">
nosetests -a b
</pre>
<p>would run all methods on the class, and</p>
<pre class="literal-block">
nosetests -a c
</pre>
<p>would run only the method.</p>
<div class="section">
<h3><a class="toc-backref" href="#id17" id="id1" name="id1">Use cases</a></h3>
<p>There are a couple of scenarios where this can come in handy:</p>
<blockquote>
<ul class="simple">
<li>You're working on a bunch of tests that are failing, and you only
want to execute the failing tests.  If modifying the failing test
code itself would be more work than simply listing them in a
file, then use the decorator extension.</li>
<li>You have a 'private' set of unit tests that bear on the code you're
working on.  You want to iterate quickly, just running those unit
tests.  Again, if modifying the test code itself is more work than
simply listing the relevant tests in a file, use the decorator extension.</li>
<li>You have a few unit tests that are failing, and you <em>don't</em> want to
execute them (that is, the reverse of the first scenario).</li>
</ul>
</blockquote>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id18" id="id2" name="id2">Options</a></h3>
<p><tt class="docutils literal"><span class="pre">--decorator-file</span></tt> specifies the file containing the tags to use.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id19" id="id3" name="id3">Examples</a></h3>
<p>See <tt class="docutils literal"><span class="pre">examples/test_decorator.py</span></tt> for some examples; use
<tt class="docutils literal"><span class="pre">examples/test_decorator.attrib</span></tt> as the decorator file. For example,
try the following commands:</p>
<pre class="literal-block">
nosetests -w examples/ --decorator-file examples/test_decorator.attribs examples/test_decorator.py -a one
nosetests -w examples/ --decorator-file examples/test_decorator.attribs examples/test_decorator.py -a two
nosetests -w examples/ --decorator-file examples/test_decorator.attribs examples/test_decorator.py -a three
</pre>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id20" id="figleafsections-find-out-what-tests-are-executing-which-parts-of-your-code" name="figleafsections-find-out-what-tests-are-executing-which-parts-of-your-code">figleafsections -- find out what tests are executing which parts of your code</a></h2>
<p>(You'll need to install <a class="reference" href="http://darcs.idyll.org/~t/projects/figleaf/doc/">figleaf</a> to use this plugin; it will install the <tt class="docutils literal"><span class="pre">figleaf</span></tt> package and the <tt class="docutils literal"><span class="pre">annotate-sections</span></tt> script.)</p>
<p>This plugin lets you record code coverage per unit test, and then
annotate your Python source code with which unit tests are running
which lines of code.  It's a useful way to figure out which nose tests
are exercising what parts of your program.</p>
<p>See <a class="reference" href="http://ivory.idyll.org/blog/feb-07/figleaf-goodness.html">http://ivory.idyll.org/blog/feb-07/figleaf-goodness.html</a> for some
detailed examples.</p>
<p>To try it out, do this:</p>
<pre class="literal-block">
nosetests -w examples/ --with-figleafsections examples/test_sections.py
annotate-sections examples/test_sections.py
</pre>
<p>The output will be placed in the file <tt class="docutils literal"><span class="pre">examples/test_sections.py</span></tt>.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id21" id="outputsave-save-your-stdout-into-files" name="outputsave-save-your-stdout-into-files">outputsave -- save your stdout into files</a></h2>
<p>This plugin records the stdout from each test into a separate file,
with a prefix indicating whether or not the test succeeded.</p>
<div class="section">
<h3><a class="toc-backref" href="#id22" id="id4" name="id4">Use cases</a></h3>
<p>The main use case is when you have MANY failing tests and you want to
take a look at the output without having to page through the nose
error output linearly.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id23" id="id5" name="id5">Options</a></h3>
<p><tt class="docutils literal"><span class="pre">--with-outputsave</span></tt> enables the plugin.  Output from successful tests
will be placed in <tt class="docutils literal"><span class="pre">success-&lt;testname&gt;</span></tt>, output from failed tests will
be placed in <tt class="docutils literal"><span class="pre">fail-&lt;testname&gt;</span></tt>, and output from errors will be placed
in <tt class="docutils literal"><span class="pre">error-&lt;testname&gt;</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">--omit-success</span></tt> does not save output from successful tests, i.e. only
'fail-' and 'error-' output files will be created.</p>
<p><tt class="docutils literal"><span class="pre">--save-directory</span></tt> places all saved output into the given directory,
creating it if it does not exist.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id24" id="id6" name="id6">Examples</a></h3>
<p>Try:</p>
<pre class="literal-block">
nosetests -w examples/ --with-outputsave --save-directory=output examples/test_outputsave.py
</pre>
<p>Then look at the 'output' directory.</p>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id25" id="spec-generate-test-description-from-test-class-method-names" name="spec-generate-test-description-from-test-class-method-names">spec -- generate test description from test class/method names</a></h2>
<p>spec lets you generate a &quot;specification&quot; similar to <a class="reference" href="http://agiledox.sourceforge.net/">testdox</a> . The
ppec plugin can generate simple documentation directly from class and
method names of test cases. For example, a test case like:</p>
<pre class="literal-block">
class TestFoobar:
    def test_is_a_singleton(self):
        pass
    def test_can_be_automatically_documented(self):
        pass
</pre>
<p>during the test run will generate the following specification:</p>
<pre class="literal-block">
Foobar
- is a singleton
- can be automatically documented
</pre>
<p>Test functions put directly into a module will have a context based
on the name of the containing module. For example, if you define
functions test_are_marked_as_deprecated() and
test_doesnt_work_with_sets() in a module test_containers.py,
you'll get the following specs:</p>
<pre class="literal-block">
Containers
- are marked as deprecated
- doesn't work with sets
</pre>
<div class="section">
<h3><a class="toc-backref" href="#id26" id="id7" name="id7">Use cases</a></h3>
<p>If you follow a good naming convention for your tests you'll get free
up-to-date specification of your application - it will be as accurate
as your tests are.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id27" id="id8" name="id8">Options</a></h3>
<p><tt class="docutils literal"><span class="pre">--with-spec</span></tt> enables the plugin, and automatically sets the verbose
level for nose to &quot;detailed output&quot;.  During the test run all your
test descriptions will be shown as a special kind of specification -
your test classes set up a context and test methods set up a single
specification.</p>
<p><tt class="docutils literal"><span class="pre">--spec-color</span></tt> enables colored output. Successful tests will be marked
as green, while failed/error cases as red. Skipped and deprecated test
cases will be shown in yellow. You need an ANSI terminal to use this.</p>
<p><tt class="docutils literal"><span class="pre">--spec--doctests</span></tt> enables experimental support for doctests.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id28" id="id9" name="id9">Examples</a></h3>
<p>Try:</p>
<pre class="literal-block">
nosetests --with-spec --spec-color examples/test_spec.py
</pre>
<p>(You should see an error, yes.)</p>
<p>Look at examples/test_spec.py source code and tests inside
tests/spec_test_cases/ directory to see how test cases are
mapped into specifications.</p>
</div>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id29" id="license" name="license">License</a></h1>
<p>pinocchio is available under the MIT license.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id30" id="author-information" name="author-information">Author Information</a></h1>
<p>The author of the stopwatch, decorator, figleafsections, and
outputsave extensions is Titus Brown.  You can contact him at
<a class="reference" href="mailto:titus&#64;idyll.org">titus&#64;idyll.org</a>, or check out his main site at
<a class="reference" href="http://ivory.idyll.org/">http://ivory.idyll.org/</a>.</p>
<p>The author of the spec plugin is Michal Kwiatkowski.  His homepage is
at <a class="reference" href="http://joker.linuxstuff.pl/">http://joker.linuxstuff.pl/</a> and his mail address is
<a class="reference" href="mailto:constant.beta&#64;gmail.com">constant.beta&#64;gmail.com</a>.</p>
</div>
</div>
</body>
</html>
